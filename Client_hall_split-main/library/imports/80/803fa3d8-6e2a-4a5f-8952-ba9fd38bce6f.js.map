{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\script\\ui\\club/assets\\script\\ui\\club\\UIClubHuanPi.js"],"names":["app","require","cc","Class","extends","properties","bg_list","Node","tb_list","OnCreateInit","LocalDataManager","OnShow","clubBg","sys","localStorage","getItem","setItem","ClubTb","bgid","tbid","InitBg","InitTb","lastData","ClubManager","GetLastClubData","clubData","GetClubDataByClubID","club_data","id","unionId","myisminister","minister","node","getChildByName","getComponent","Toggle","isChecked","active","SetUnionTable","skinTable","sendPack","GetUnionSendPackHead","self","NetManager","SendPack","event","error","SetUnionBackColor","skinBackColor","i","children","length","ChangeBg","NowBg","GetClubFormComponent","ChangeTb","NowTb","Event_RefreshRoomList","OnClick","btnName","btnNode","CloseForm","startsWith","bg","replace","parseInt","tb"],"mappings":"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","file":"UIClubHuanPi.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\script\\ui\\club","sourcesContent":["var app = require(\"app\");\ncc.Class({\n    extends: require(\"BaseForm\"),\n\n    properties: {\n        bg_list:cc.Node,\n        tb_list:cc.Node,\n    },\n    OnCreateInit: function () {\n        this.LocalDataManager=app.LocalDataManager();\n    },\n    //-----------------显示函数------------------\n    OnShow: function () {\n        let clubBg=cc.sys.localStorage.getItem(\"ClubNewBg\");\n        if (clubBg == null || typeof(clubBg) == \"undefined\") {\n            cc.sys.localStorage.setItem(\"ClubNewBg\", \"4\");\n            clubBg = 4;\n        }\n        let ClubTb=cc.sys.localStorage.getItem(\"ClubNewTb\");\n        if (ClubTb == null || typeof(ClubTb) == \"undefined\") {\n            cc.sys.localStorage.setItem(\"ClubNewTb\", \"5\");\n            ClubTb = 5;\n        }\n        this.bgid=clubBg;\n        this.tbid=ClubTb;\n        this.InitBg(clubBg);\n        this.InitTb(ClubTb);\n\n        //换皮存储给服务端，必须是创建者才可以，unionid>0,myisminister\n        let lastData = app.ClubManager().GetLastClubData();\n        if(lastData){\n            let clubData=app.ClubManager().GetClubDataByClubID(lastData.club_data.id)\n            this.unionId=clubData.unionId;  \n            this.myisminister = clubData.minister;\n\n            this.node.getChildByName(\"Toggle\").getComponent(cc.Toggle).isChecked=false;\n            if(this.unionId>0 && this.myisminister==2){\n                //赛事，并且是创建者\n                this.node.getChildByName(\"Toggle\").active=true;\n            }else{\n                this.node.getChildByName(\"Toggle\").active=false;\n            }\n        }else{\n            this.node.getChildByName(\"Toggle\").active=false;\n        }\n    },\n    SetUnionTable:function(skinTable){\n        if(this.unionId>0 && this.myisminister==2){\n            if(this.node.getChildByName(\"Toggle\").getComponent(cc.Toggle).isChecked==false){\n                return;\n            }\n            let sendPack = app.ClubManager().GetUnionSendPackHead();\n            sendPack.skinTable = skinTable;\n            let self = this;\n            app.NetManager().SendPack(\"union.CUnionChangeSkinShowInfo\",sendPack,function(event){\n                \n            },function(error){\n\n            });\n        }\n    },\n    SetUnionBackColor:function(skinBackColor){\n        if(this.unionId>0 && this.myisminister==2){\n            if(this.node.getChildByName(\"Toggle\").getComponent(cc.Toggle).isChecked==false){\n                return;\n            }\n            let sendPack = app.ClubManager().GetUnionSendPackHead();\n            sendPack.skinBackColor = skinBackColor;\n            let self = this;\n            app.NetManager().SendPack(\"union.CUnionChangeSkinShowInfo\",sendPack,function(event){\n                \n            },function(error){\n\n            });\n        }\n    },\n    InitBg:function(clubBg){\n        for(let i=0;i<this.bg_list.children.length;i++){\n            if(i==clubBg){\n                this.bg_list.children[i].getChildByName('check').active=true;\n            }else{\n                this.bg_list.children[i].getChildByName('check').active=false;\n            }\n        }\n    },\n    InitTb:function(ClubTb){\n        for(let i=0;i<this.tb_list.children.length;i++){\n            if(i==ClubTb){\n                this.tb_list.children[i].getChildByName('on').active=true;\n                this.tb_list.children[i].getChildByName('off').active=false;\n            }else{\n                this.tb_list.children[i].getChildByName('on').active=false;\n                this.tb_list.children[i].getChildByName('off').active=true;\n            }\n        }\n    },\n    ChangeBg:function(NowBg){\n        let clubBg=cc.sys.localStorage.getItem(\"ClubNewBg\");\n        if(NowBg==clubBg){\n            return;\n        }\n        cc.sys.localStorage.setItem(\"ClubNewBg\",NowBg);\n        cc.sys.localStorage.setItem(\"ClubNewCuntom\",\"1\"); //玩家有自己设置\n        this.InitBg(NowBg);\n        // this.FormManager.GetFormComponentByFormName(\"ui/club/UIClubMain\").ChangeBg();\n        app.ClubManager().GetClubFormComponent().ChangeBg();\n    },\n    ChangeTb:function(NowTb){\n        let ClubTb=cc.sys.localStorage.getItem(\"ClubNewTb\");\n        if(NowTb==ClubTb){\n            return;\n        }\n        cc.sys.localStorage.setItem(\"ClubNewTb\",NowTb);\n        cc.sys.localStorage.setItem(\"ClubNewCuntom\",\"1\"); //玩家有自己设置\n        this.InitTb(NowTb);\n        // this.FormManager.GetFormComponentByFormName(\"ui/club/UIClubMain\").Event_RefreshRoomList();\n        app.ClubManager().GetClubFormComponent().Event_RefreshRoomList();\n    },\n    OnClick:function(btnName, btnNode){\n        if('btn_close' == btnName){\n            if(this.unionId>0 && this.myisminister==2){\n                if(this.node.getChildByName(\"Toggle\").getComponent(cc.Toggle).isChecked==true){\n                    let sendPack = app.ClubManager().GetUnionSendPackHead();\n                    if(this.bgid>-1 || this.tbid>-1){\n                        if(this.bgid>-1){\n                            sendPack.skinTable = this.tbid;\n                        }\n                        if(this.tbid>-1){\n                            sendPack.skinBackColor = this.bgid;\n                        }\n                        let self = this;\n                        app.NetManager().SendPack(\"union.CUnionChangeSkin\",sendPack,function(event){\n                            \n                        },function(error){\n\n                        });\n                    }\n                }\n            }\n            this.CloseForm();\n        }else if (btnName.startsWith(\"btn_bg\")) {\n            let bg=btnName.replace('btn_bg','');\n            let bgid=parseInt(bg)-1;\n            this.bgid=bgid;\n           // this.SetUnionTable(bgid);\n            this.ChangeBg(bgid);\n        }else if (btnName.startsWith(\"btn_tb\")) {\n            let tb=btnName.replace('btn_tb','');\n            let tbid=parseInt(tb)-1;\n            this.tbid=tbid;\n            //this.SetUnionBackColor(tbid);\n            this.ChangeTb(tbid);\n        }\n    },\n});"]}